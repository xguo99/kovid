(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1921ca9e"],{"0244":function(e,t,s){},"0cb1":function(e,t,s){"use strict";var n=s("d901"),r=s.n(n);r.a},"1ca4":function(e,t,s){},2241:function(e,t,s){},"296b":function(e,t,s){"use strict";var n=s("1ca4"),r=s.n(n);r.a},"31ff":function(e,t,s){},"59b8":function(e,t,s){"use strict";var n=s("31ff"),r=s.n(n);r.a},"7f7f":function(e,t,s){var n=s("86cc").f,r=Function.prototype,a=/^\s*function ([^ (]*)/,c="name";c in r||s("9e1e")&&n(r,c,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},"8dd2":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"button"},[s("div",{attrs:{id:"back"}},[s("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"home"},tag:"button"}},[e._v(" Back")])],1),"customer"===this.$cookie.get("account-type")?s("div",{attrs:{id:"signout"}},[s("button",{staticClass:"btn btn-primary",on:{click:e.signOut}},[e._v("Sign Out")])]):e._e()]),s("div",{staticClass:"info"},[e._v(" "+e._s(e.customername)+" ")]),s("div",{},[s("b-card",{staticClass:"tab",attrs:{"no-body":""}},[s("b-tabs",{attrs:{pills:"",card:"",vertical:"",end:""}},[s("b-tab",{attrs:{title:"Reviews I gave",active:""}},[s("b-card-text",[s("CustomerReviewList")],1)],1),s("b-tab",{attrs:{title:"Replies I received"}},[s("b-card-text",[s("CustomerReplyList")],1)],1),s("b-tab",{attrs:{title:"Manage My Account"}},[s("b-card-text",[s("ManageAccount")],1)],1)],1)],1)],1)])},r=[],a=s("bc3a"),c=s.n(a),i=s("56d7"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subcontainer"},[e.success?s("div",{staticClass:"success-message"},[e._v(" "+e._s(e.success)+" ")]):e._e(),e.error?s("div",{staticClass:"error-message"},[e._v(" "+e._s(e.error)+" ")]):e._e(),s("div",{staticClass:"reviews-container"},[e.reviews.length?s("div",e._l(e.reviews,(function(e){return s("ReviewListItem",{key:e.id,attrs:{review:e}})})),1):s("div",[s("p",{staticStyle:{"text-align":"center"}},[e._v("There are no reviews to display.")])])])])},u=[],v=s("1ff7"),m={name:"CustomerReviewList",components:{ReviewListItem:v["a"]},data:function(){return{error:"",success:"",reviews:[]}},created:function(){var e=this;i["eventBus"].$on("create-review-success",(function(){e.loadReviews()})),i["eventBus"].$on("reply-customer-success",(function(){e.success="Reply posted succesfully",e.clearMessages(),e.loadReviews()})),i["eventBus"].$on("reply-customer-error",(function(t){e.error="".concat(t.response.data.error),e.clearMessages(),e.loadReviews()}))},mounted:function(){this.loadReviews()},methods:{loadReviews:function(){var e=this;c.a.get("/api/customers/".concat(this.$cookie.get("auth"),"/reviews")).then((function(t){e.reviews=t.data.reviews,console.log(e.reviews)}))},clearMessages:function(){var e=this;setInterval((function(){e.success="",e.error=""}),5e3)}}},l=m,d=(s("d449"),s("2877")),f=Object(d["a"])(l,o,u,!1,null,"f29f66c4",null),p=f.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subcontainer"},[e.success?s("div",{staticClass:"success-message"},[e._v(" "+e._s(e.success)+" ")]):e._e(),e.error?s("div",{staticClass:"error-message"},[e._v(" "+e._s(e.error)+" ")]):e._e(),s("div",{staticClass:"reviews-container"},[e.reviews.length?s("div",e._l(e.reviews,(function(e){return s("ReviewListItem",{key:e.id,attrs:{review:e}})})),1):s("div",[s("p",{staticStyle:{"text-align":"center"}},[e._v("There are no reviews to display.")])])])])},w=[],g={name:"CustomerReplyList",components:{ReviewListItem:v["a"]},data:function(){return{error:"",success:"",reviews:[]}},created:function(){var e=this;i["eventBus"].$on("create-review-success",(function(){e.loadReviews()})),i["eventBus"].$on("reply-customer-success",(function(){e.success="Reply posted succesfully",e.clearMessages(),e.loadReviews()})),i["eventBus"].$on("reply-customer-error",(function(t){e.error="".concat(t.response.data.error),e.clearMessages(),e.loadReviews()}))},mounted:function(){this.loadReviews()},methods:{loadReviews:function(){var e=this;c.a.get("/api/replies/?customer=".concat(this.$cookie.get("auth"))).then((function(t){e.reviews=t.data.reviews,console.log(e.reviews)}))},clearMessages:function(){var e=this;setInterval((function(){e.success="",e.error=""}),5e3)}}},b=g,y=(s("df4a"),Object(d["a"])(b,h,w,!1,null,"528ecc13",null)),_=y.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"manage-account"},[s("div",{staticClass:"header"},[e._v(" Manage My Account ")]),s("form",{staticClass:"component",attrs:{id:"change-username",method:"put"},on:{submit:function(t){return t.preventDefault(),e.changeUsername(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.username,expression:"username",modifiers:{trim:!0}}],attrs:{id:"username",type:"text",name:"username",placeholder:"new username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("input",{staticClass:"button",attrs:{type:"submit",value:"Change Username"}})]),s("form",{staticClass:"component",attrs:{id:"change-password",method:"put"},on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"password",modifiers:{trim:!0}}],attrs:{id:"password",type:"text",name:"password",placeholder:"new password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("input",{staticClass:"button",attrs:{type:"submit",value:"Change Password"}})])])},C=[],R=(s("7f7f"),{name:"ManageAccount",data:function(){return{username:"",password:""}},created:function(){},methods:{changeUsername:function(){var e=this,t={username:this.username};c.a.put("/api/customers/username",t).then((function(e){i["eventBus"].$emit("customer-changeusername-success",e.data.name)})).catch((function(e){i["eventBus"].$emit("customer-changeusername-error",e.response.data.error)})).then((function(){e.resetForm()}))},changePassword:function(){var e=this,t={password:this.password};c.a.put("/api/customers/password",t).then((function(){i["eventBus"].$emit("customer-changepassword-success")})).catch((function(e){i["eventBus"].$emit("customer-changepassword-error",e.response.data.error)})).then((function(){e.resetForm()}))},resetForm:function(){this.username="",this.password=""},clearMessages:function(){var e=this;setInterval((function(){e.errors=[]}),5e3)}}}),k=R,B=(s("0cb1"),Object(d["a"])(k,$,C,!1,null,"b79573d0",null)),M=B.exports,x={name:"SignOut",data:function(){return{customername:this.$cookie.get("auth")}},components:{CustomerReviewList:p,CustomerReplyList:_,ManageAccount:M},created:function(){var e=this;i["eventBus"].$on("customer-signout-success",(function(){e.$cookie.set("auth",""),e.$cookie.set("account-type",""),e.$router.push("/").catch((function(){}))})),i["eventBus"].$on("customer-changeusername-success",(function(t){e.$cookie.set("auth",t),e.customername=t}))},methods:{signOut:function(){c.a.post("/api/customers/signout",{}).then((function(){i["eventBus"].$emit("customer-signout-success",{})})).catch((function(e){i["eventBus"].$emit("customer-signout-error",e.response.data.error)}))}}},L=x,I=(s("59b8"),s("296b"),Object(d["a"])(L,n,r,!1,null,"7738c5f8",null));t["default"]=I.exports},d449:function(e,t,s){"use strict";var n=s("0244"),r=s.n(n);r.a},d901:function(e,t,s){},df4a:function(e,t,s){"use strict";var n=s("2241"),r=s.n(n);r.a}}]);
//# sourceMappingURL=chunk-1921ca9e.949c79de.js.map