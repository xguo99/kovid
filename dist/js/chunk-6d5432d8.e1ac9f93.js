(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d5432d8"],{1880:function(s,e,t){"use strict";var n=t("dc35"),r=t.n(n);r.a},"1f68":function(s,e,t){"use strict";var n=t("ffcc"),r=t.n(n);r.a},2519:function(s,e,t){"use strict";var n=t("9509"),r=t.n(n);r.a},2728:function(s,e,t){"use strict";t.r(e);var n=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{attrs:{id:"user-settings"}},[t("div",{staticClass:"Map"},[t("router-link",{attrs:{id:"link",to:"/"}},[s._v("Kovid")])],1),t("div",{staticClass:"header"},[s._v(" Business Login Page ")]),t("div",{staticClass:"signin-signup"},[t("BusinessSignIn"),t("BusinessSignUp")],1),t("br"),t("div",{staticClass:"bot"},[t("router-link",{attrs:{to:"/customer"}},[s._v("Not a Business? SignIn as Customer")])],1),s.success.length?t("div",{staticClass:"success-message",staticStyle:{"text-align":"center"}},s._l(s.success,(function(e){return t("div",{key:e.id},[s._v(s._s(e))])})),0):s._e(),s.errors.length?t("div",{staticClass:"error-message",staticStyle:{width:"250px"}},[t("b",[s._v("Please correct the following error(s):")]),t("ul",s._l(s.errors,(function(e){return t("li",{key:e.id},[s._v(s._s(e))])})),0)]):s._e()])},r=[],a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"signup"},[t("form",{staticClass:"component",attrs:{id:"sign-up",method:"post"},on:{submit:function(e){return e.preventDefault(),s.validate(e)}}},[t("div",{staticClass:"header"},[s._v(" Sign Up ")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.username,expression:"username",modifiers:{trim:!0}}],attrs:{id:"username",type:"text",name:"username",placeholder:"User's name"},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.password,expression:"password",modifiers:{trim:!0}}],attrs:{id:"password",type:s.passwordType,name:"password",placeholder:"User's password"},domProps:{value:s.password},on:{input:function(e){e.target.composing||(s.password=e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.businessName,expression:"businessName",modifiers:{trim:!0}}],attrs:{id:"businessName",type:"text",name:"businessName",placeholder:"Business name"},domProps:{value:s.businessName},on:{input:function(e){e.target.composing||(s.businessName=e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.address,expression:"address",modifiers:{trim:!0}}],attrs:{id:"address",type:"text",name:"address",placeholder:"Business address"},domProps:{value:s.address},on:{input:function(e){e.target.composing||(s.address=e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("div",[t("input",{attrs:{type:"checkbox"},on:{click:s.showPassword}}),s._v(" Show Password")]),t("br"),t("input",{staticClass:"button",attrs:{type:"submit",value:"Sign Up"}})])])},i=[],o=t("bc3a"),u=t.n(o),c=t("56d7"),d={name:"BusinessSignUp",data:function(){return{username:"",password:"",businessName:"",address:"",passwordType:"password"}},created:function(){var s=this;c["eventBus"].$on("validate-success",(function(e){var t={username:s.username,password:s.password,businessName:s.businessName,address:s.address,status:e[0].status,modification:e[0].modification};u.a.post("/api/businesses",t).then((function(){c["eventBus"].$emit("business-signup-success",!0)})).catch((function(s){c["eventBus"].$emit("business-signup-error",s.response.data.error)}))}))},methods:{validate:function(){var s=this;this.clearMessages(),this.username.length>0&&this.password.length>0?u.a.get("https://data.cambridgema.gov/resource/9q33-qjp4.json?name=".concat(this.businessName,"&$$app_token=ERObVliHkBTapyjk2U0736EEU")).then((function(e){0===e.data.length?c["eventBus"].$emit("business-signup-error","According to the government database, the entered business does not exist."):e.data.map((function(s){return s.phone})).filter((function(e){return e===s.address})).length>0?c["eventBus"].$emit("validate-success",e.data.filter((function(e){return e.phone===s.address}))):c["eventBus"].$emit("business-signup-error","According to the government database, the entered address does not match the business.")})).catch((function(){c["eventBus"].$emit("business-signup-error","trouble connecting to Cambridge government database."),s.errors.push("trouble connecting to Cambridge government database.")})).then((function(){s.resetForm()})):c["eventBus"].$emit("business-signup-error","Please enter username and password")},showPassword:function(){"password"==this.passwordType?this.passwordType="text":this.passwordType="password"},resetForm:function(){this.username="",this.password="",this.businessName="",this.address=""},clearMessages:function(){this.errors=[]}}},p=d,m=(t("2519"),t("2877")),l=Object(m["a"])(p,a,i,!1,null,"c25bfda8",null),f=l.exports,v=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"signin"},[t("form",{staticClass:"component",attrs:{id:"sign-in",method:"post"},on:{submit:function(e){return e.preventDefault(),s.signin(e)}}},[t("div",{staticClass:"header"},[s._v(" Sign In ")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.username,expression:"username",modifiers:{trim:!0}}],attrs:{id:"username",type:"text",name:"username",placeholder:"User's name"},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.password,expression:"password",modifiers:{trim:!0}}],attrs:{id:"password",type:s.passwordType,name:"password",placeholder:"User's password"},domProps:{value:s.password},on:{input:function(e){e.target.composing||(s.password=e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("div",[t("input",{attrs:{type:"checkbox"},on:{click:s.showPassword}}),s._v(" Show Password")]),t("br"),t("input",{staticClass:"button",attrs:{type:"submit",value:"Sign In"}})])])},g=[],h=(t("7f7f"),{name:"BusinessSignIn",data:function(){return{username:"",password:"",passwordType:"password"}},created:function(){},methods:{signin:function(){var s=this,e={username:this.username,password:this.password};u.a.post("/api/businesses/signin",e).then((function(s){console.log(s.data.name,s.data.bNam,s.data.bAdd),c["eventBus"].$emit("business-signin-success",s.data.name,s.data.bName,s.data.bAdd)})).catch((function(s){c["eventBus"].$emit("business-signin-error",s.response.data.error)})).then((function(){s.resetForm()}))},showPassword:function(){"password"==this.passwordType?this.passwordType="text":this.passwordType="password"},resetForm:function(){this.username="",this.password=""},clearMessages:function(){var s=this;setInterval((function(){s.errors=[]}),5e3)}}}),b=h,w=(t("1880"),Object(m["a"])(b,v,g,!1,null,"53daa458",null)),$=w.exports,y={name:"BusinessAccount",components:{BusinessSignUp:f,BusinessSignIn:$},data:function(){return{success:[],errors:[]}},created:function(){var s=this;c["eventBus"].$on("business-signup-success",(function(){s.clearMessages(),s.success.push("Signup completed successfully.")})),c["eventBus"].$on("business-signup-error",(function(e){s.clearMessages(),s.errors.push(e)})),c["eventBus"].$on("business-signin-success",(function(e,t,n){s.clearMessages(),s.$cookie.set("auth",e),s.$cookie.set("account-type","business"),s.$cookie.set("bName",t["businessname"]),s.$cookie.set("bAdd",n["address"]),s.success.push("Successfully signed in as ".concat(e,".")),"/"!=s.$router.path&&s.$router.push("/").catch((function(){}))})),c["eventBus"].$on("business-signin-error",(function(e){s.clearMessages(),s.errors.push(e)})),c["eventBus"].$on("business-signout-error",(function(e){s.clearMessages(),s.errors.push(e)}))},methods:{clearMessages:function(){this.success=[],this.errors=[]}}},B=y,_=(t("1f68"),Object(m["a"])(B,n,r,!1,null,"5f912680",null));e["default"]=_.exports},"7f7f":function(s,e,t){var n=t("86cc").f,r=Function.prototype,a=/^\s*function ([^ (]*)/,i="name";i in r||t("9e1e")&&n(r,i,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(s){return""}}})},9509:function(s,e,t){},dc35:function(s,e,t){},ffcc:function(s,e,t){}}]);
//# sourceMappingURL=chunk-6d5432d8.e1ac9f93.js.map